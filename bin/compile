#!/usr/bin/env php
<?php
use \KM\Saffron\Router;

require 'vendor/autoload.php';

$params = getopt('s:d:');

if (!isset($params['s']) || !isset($params['d'])) {
    die('You must specify both source (by -s) and destination (by -d) files.');
}

$router = require $params['s'];
if (! $router instanceof Router) {
    die('Source file must return instance of KM\Saffron\Router.');
}

$compiled = '<?php return '.var_export($router, true).';';

file_put_contents($params['d'], $compiled);
